BASELINE
rasterTileMaxDimension = 5000
3 rasters loaded:
	OR_lsd (the really big one, with an Oregon-sized chunk of the Pacific included) 105,503x43,321 pixels = 4.57GB after type conversion
	casceq_m9pgv1 (still the whole state, but at a coarser resolution) 24158x12604 pixels = 304.6MB after type conversion
	Wildfire_risk (cropped, so relatively small) 5465x4088 pixels = 23.1MB after type conversion

Point lookup in Portland metro area:
Wildfire: 	 1 tile ,	0.28232288360595703	seconds
Quake:   		 4 tiles,	0.3120689392089844	seconds
Landslide:	28 tiles,	0.23883509635925293	seconds

Point lookup in Medford:
Wildfire: 	 2 tiles,	0.0024521350860595703	seconds
Quake:   		 6 tiles,	0.15493392944335938	seconds
Landslide:	33 tiles,	0.2814779281616211	seconds

Point lookup in Clark County:
Wildfire: 	 1 tile ,	0.23767495155334473 	seconds
Quake:   		 4 tiles,	0.256274938583374	seconds
Landslide:	28 tiles,	0.24993085861206055	seconds

Point lookup in Seattle:
Wildfire: 	 2 tiles,	0.0024709701538085938	seconds
Quake:   		15 tiles,	0.003129720687866211	seconds
Landslide:	86 tiles,	0.009229898452758789	seconds




LARGER TILES:
rasterTileMaxDimension = 8053 # to minimise the number of tiles with these particular files

Point lookup in Portland metro area:
Wildfire: 	 1 tile ,	0.3345217704772949	seconds
Quake:   		 1 tile ,	0.8657350540161133	seconds
Landslide:	15 tiles,	0.6289210319519043	seconds

Point lookup in Medford:
Wildfire: 	 1 tiles,	0.002093791961669922	seconds
Quake:   		 2 tiles,	0.41138410568237305	seconds
Landslide:	14 tiles,	0.6676127910614014	seconds

Point lookup in Clark County:
Wildfire: 	 1 tile ,	0.2514200210571289 	seconds
Quake:   		 1 tile ,	0.7178440093994141	seconds
Landslide:	14 tiles,	0.6249191761016846	seconds

Point lookup in Seattle:
Wildfire: 	 1 tile ,	0.002512216567993164	seconds
Quake:   		 6 tiles,	0.002386331558227539	seconds
Landslide:	38 tiles,	0.005290985107421875	seconds



SMALLER TILES:
rasterTileMaxDimension = 1000

Point lookup in Portland metro area:
Wildfire: 	  9 tiles,	0.04316306114196777	seconds
Quake:   		 64 tiles,	0.023838043212890625	seconds
Landslide:	633 tiles,	0.07645106315612793	seconds

Point lookup in Medford:
Wildfire: 	 18 tiles,	0.003962039947509766	seconds
Quake:   		 61 tiles,	0.0386967658996582	seconds
Landslide:	586 tiles,	0.07572293281555176	seconds

Point lookup in Clark County:
Wildfire: 	 11 tiles,	0.03710484504699707 	seconds
Quake:   		 63 tiles,	0.025486230850219727	seconds
Landslide:	668 tiles,	0.08377408981323242	seconds

Point lookup in Seattle:
Wildfire: 	 18 tiles,	0.003779172897338867	seconds
Quake:   		278 tiles,	0.039565086364746094	seconds
Landslide:	1864 tiles,	0.12743186950683594	seconds




rasterTileMaxDimension = 100

Point lookup in Portland metro area:
Wildfire: 	  575 tiles,	0.08680295944213867	seconds
Quake:   		 5755 tiles,	0.7230222225189209	seconds
Landslide:	63853 tiles,	6.822306156158447	seconds

Point lookup in Medford:
Wildfire: 	 1108 tiles,	0.07879805564880371	seconds
Quake:   		 4995 tiles,	0.6761898994445801	seconds
Landslide:	55566 tiles,	6.434469938278198	seconds

Point lookup in Clark County:
Wildfire: 	 1108 tiles,	0.08355116844177246 	seconds
Quake:   		23717 tiles,	1.5798180103302002	seconds
Landslide:	64555 tiles,	7.032153129577637	seconds

Point lookup in Seattle:
Wildfire: 	  1108 tiles,	0.08159065246582031	seconds
Quake:   		 23717 tiles,	1.6114399433135986	seconds
Landslide:	178079 tiles,	12.84434723854065	seconds






INDEXED SEARCH:
Try making Django/Postgis prefilter by bounding box instead of stepping through them.

rasterTileMaxDimension = 100

Point lookup in Portland metro area:
Wildfire: 	1 tiles,	0.022413969039916992	seconds
Quake:   		1 tiles,	0.003475189208984375	seconds
Landslide:	1 tiles,	0.004115104675292969	seconds

Point lookup in Medford:
Wildfire: 	0 tiles,	0.0027201175689697266	seconds
Quake:   		1 tiles,	0.020598888397216797	seconds
Landslide:	1 tiles,	0.0035729408264160156	seconds

Point lookup in Clark County:
Wildfire: 	1 tiles,	0.0220949649810791 	seconds
Quake:   		1 tiles,	0.004285335540771484	seconds
Landslide:	1 tiles,	0.0045549869537353516	seconds

Point lookup in Seattle:
Wildfire: 	0 tiles,	0.0029561519622802734	seconds
Quake:   		0 tiles,	0.0021648406982421875	seconds
Landslide:	0 tiles,	0.0019981861114501953	seconds



Removing the "if point is in bbox" secondary check: negligible, inconsistent changes.  Would probably need to do some more thorough instrumenting to find any difference.  I'm taking it out anyway to simplify the code.

Removing the .defer("rast") instruction: also doesn't make an appreciable difference; also confirmed with larger tiles.  I'm removing it to simplify the code.

I tried a tile size of 10x10 but the load takes > 12 hours.  Given the small potential speed improvements, this doesn't seem worth it so I quit that particular experiment.



rasterTileMaxDimension = 1000

Point lookup in Portland metro area:
Wildfire: 	1 tiles,	0.047904014587402344	seconds
Quake:   		1 tiles,	0.016494035720825195	seconds
Landslide:	1 tiles,	0.015326976776123047	seconds

Point lookup in Medford:
Wildfire: 	0 tiles,	0.0021398067474365234	seconds
Quake:   		1 tiles,	0.032180070877075195	seconds
Landslide:	1 tiles,	0.013848066329956055	seconds

Point lookup in Clark County:
Wildfire: 	1 tiles,	0.030608177185058594	seconds
Quake:   		1 tiles,	0.017763853073120117	seconds
Landslide:	1 tiles,	0.013483047485351562	seconds

Point lookup in Seattle:
Wildfire: 	0 tiles,	0.0023729801177978516	seconds
Quake:   		0 tiles,	0.0016939640045166016	seconds
Landslide:	0 tiles,	0.0016989707946777344	seconds






rasterTileMaxDimension = 8053 # to minimise the number of tiles with these particular files

Point lookup in Portland metro area:
Wildfire: 	1 tile ,	0.33343505859375	seconds
Quake:   		1 tile ,	0.897590160369873	seconds
Landslide:	1 tile ,	0.6214628219604492	seconds

Point lookup in Medford:
Wildfire: 	0 tiles,	0.0026998519897460938	seconds
Quake:   		1 tiles,	0.40561890602111816	seconds
Landslide:	1 tiles,	0.6859381198883057	seconds

Point lookup in Clark County:
Wildfire: 	 1 tile ,	0.24318313598632812 	seconds
Quake:   		 1 tile ,	0.7148270606994629	seconds
Landslide:	 1 tile ,	0.6124980449676514	seconds

Point lookup in Seattle:
Wildfire: 	0 tiles,	0.0026350021362304688	seconds
Quake:   		0 tiles,	0.002240896224975586	seconds
Landslide:	0 tiles,	0.002039194107055664	seconds
